<% content_for :per_page_js do %>
  <%= javascript_pack_tag "home_index", "data-turbolinks-track": 'reload' %>
<% end %>
<div class="container" id="auditResponses">
  <h1>Look at all the drinks you can make!</h1>

  <h3>Your recipes:</h3>
  <div class="row">
    <div class="col-sm-10 table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>name</th>
            <th>Edit</th>
            <th>Show Ingredients</th>
            <th>Ingredients</th>
          </tr>
        </thead>
        <tbody>
          <% @users_available.each do |cocktail| %>
            <tr>
              <td><%= cocktail.name.html_safe %></td>
              <td><%= link_to 'Edit', cocktail_path(cocktail), class: 'btn btn-outline-primary' %></td>
              <td><button class="btn btn-outline-info" type="button" data-bs-toggle="collapse" data-bs-target="#ingredients_<%= cocktail.id %>" data-toggled="false">Show Ingredients</button></td>
              <td>
                <div class="collapse" id="ingredients_<%= cocktail.id %>">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Ingredient</th>
                        <th>Required Volume</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% cocktail.reagent_amounts.each do |reagent_amount| %>
                        <tr>
                          <td>
                            <samp>
                              <% reagent_amount.tags.each_with_index do |tag, i| %>
                                <%= link_to tag, reagent_category_path(tag) %><% if i != reagent_amount.tags.size - 1 %><span>, </span><% end %>
                              <% end %>
                            </samp>
                          </td>
                          <td><%= reagent_amount.amount %></td>
                        </tr>
                      <% end %>
                    </tbody>
                  </table>
                  <%= link_to "I made this!", cocktail_make_drink_path(cocktail), remote: true, method: :post, class: "btn btn-primary", data: { quantity: 1, cocktail_id: cocktail.id } %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

  <h3>Shared recipes:</h3>
  <div class="row">
    <div class="col-sm-10 table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>name</th>
            <th>Edit</th>
            <th>Show Ingredients</th>
            <th>Ingredients</th>
          </tr>
        </thead>
        <tbody>
          <% @shared_available.each do |cocktail| %>
            <tr>
              <td><%= cocktail.name.html_safe %></td>
              <td><%= link_to 'Edit', shared_cocktail_path(cocktail), class: 'btn btn-outline-primary' %></td>
              <td><button class="btn btn-outline-info" type="button" data-bs-toggle="collapse" data-bs-target="#ingredients_<%= cocktail.id %>" data-toggled="false">Show Ingredients</button></td>
              <td>
                <div class="collapse" id="ingredients_<%= cocktail.id %>">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Ingredient</th>
                        <th>Required Volume</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% cocktail.reagent_amounts.each do |reagent_amount| %>
                        <tr>
                          <td>
                            <samp>
                              <% reagent_amount.tags.each_with_index do |tag, i| %>
                                <%= link_to tag, reagent_category_path(tag) %><% if i != reagent_amount.tags.size - 1 %><span>, </span><% end %>
                              <% end %>
                            </samp>
                          </td>
                          <td><%= reagent_amount.amount %></td>
                        </tr>
                      <% end %>
                    </tbody>
                  </table>
                  <%= link_to "I made this!", cocktail_make_drink_path(cocktail), remote: true, method: :post, class: "btn btn-primary", data: { quantity: 1, cocktail_id: cocktail.id } %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

  <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toastDestination" style="z-index: 11">
  </div>

  <div data-toast-template class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <strong>Cheers!</strong>
    </div>
    <div class="toast-body">
      <span data-toast-body></span>
    </div>
  </div>
</div>